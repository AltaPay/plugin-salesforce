"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[312],{5272(e,t,r){r.r(t),r.d(t,{default:()=>j});var n=r(10939),i=r(28407),a=r(77810),o=r(34692),c=r(41863),l=r(14084),s=r(85771),u=r(27821),d=r(92519),g=r(62539),p=r(79237),m=r(35490),f=r(7711),y=r(90031),E=r(79060),O=r(60309),b=r(4026),h=r(97361),_=r(17015),v=r(73448);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}const D=()=>{var e,t;const{formatMessage:r}=(0,o.A)(),D=(0,f.A)(),[j]=(0,E.ok)(),B=(0,y.useAuthHelper)(y.AuthHelpers.LoginIDPUser),{data:P}=(0,O.J)(),S=(0,h.$)(),k=(null===(e=(0,b.getConfig)().app.login)||void 0===e||null===(t=e.social)||void 0===t?void 0:t.redirectURI)||"",w=(0,_.Bz)(S,k),z=(0,_.Oi)("returnToPage"),L=(0,y.useShopperBasketsMutation)("mergeBasket"),[T,U]=(0,a.useState)("");return(0,a.useEffect)(()=>{if(!j.code)return;const e=function(){var e=(0,i.A)(function*(){try{yield B.mutateAsync(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({code:j.code,redirectURI:w},j.usid&&{usid:j.usid}))}catch(e){const t=r(v.gS);U(t)}});return function(){return e.apply(this,arguments)}}();e()},[]),(0,a.useEffect)(()=>{null!=P&&P.isRegistered&&((0,_.zU)("returnToPage"),L.mutate({headers:{"Content-Type":"application/json"},parameters:{createDestinationBasket:!0}}),D(z||"/account"))},[null==P?void 0:P.isRegistered]),a.createElement(g.az,{"data-testid":"login-redirect-page",bg:"gray.50",py:[8,16]},a.createElement(p.m,{paddingTop:16,width:["100%","407px"],bg:"white",paddingBottom:14,marginTop:8,marginBottom:8,borderRadius:"base"},T&&a.createElement(s.F,{status:"error",marginBottom:8},a.createElement(m._0,{color:"red.500",boxSize:4}),a.createElement(u.E,{fontSize:"sm",ml:3},T)),a.createElement(d.B,{justify:"center",align:"center",spacing:8,marginBottom:8},a.createElement(l.y,{opacity:.85,color:"blue.600",animationDuration:"0.8s",size:"lg"}),a.createElement(u.E,{align:"center",fontSize:"xl",fontWeight:"semibold"},a.createElement(c.A,{id:"social_login_redirect.message.authenticating",defaultMessage:[{type:0,value:"Authenticating..."}]})),a.createElement(u.E,{align:"center",fontSize:"m"},a.createElement(c.A,{id:"social_login_redirect.message.redirect_link",defaultMessage:[{type:0,value:"If you are not automatically redirected, click "},{type:8,value:"link",children:[{type:0,value:"this link"}]},{type:0,value:" to proceed."}],values:{link:e=>a.createElement("a",{href:"/account",style:{color:"#0176D3",textDecoration:"underline"}},e)}})))))};D.getTemplateName=()=>"social-login-redirect";const j=D}}]);