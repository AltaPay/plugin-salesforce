"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[875],{72066(e,t,r){r.r(t),r.d(t,{default:()=>X});var o=r(28407),n=r(10939),i=r(77810),l=r(75826),d=r.n(l),a=r(54752),c=r(34692),u=r(41863),s=r(74941),p=r(95266),v=r(62539),m=r(91311),y=r(92519),h=r(90031),f=r(84319),g=r(79060),E=r(7711),P=r(65376),b=r(17492),O=r(93080),_=r(62241),I=r(46508),w=r(45040),S=r(38446),k=r(73448),A=r(4026),D=r(55878),T=r(63157),L=r(94480),C=r(93633),M=r(25687),j=r(99424),x=r(16995);const B=({product:e})=>{const{formatMessage:t}=(0,c.A)();return i.createElement(y.B,{direction:"row",spacing:[0,0,0,16]},i.createElement(L.n,{allowMultiple:!0,maxWidth:"896px",flex:[1,1,1,5]},i.createElement(C.A,null,i.createElement("h2",null,i.createElement(M.J,{height:"64px"},i.createElement(v.az,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Product Detail"}],id:"product_detail.accordion.button.product_detail"})),i.createElement(j.Q,null))),i.createElement(x.v,{mb:6,mt:4},i.createElement("div",{dangerouslySetInnerHTML:{__html:null==e?void 0:e.longDescription}}))),i.createElement(C.A,null,i.createElement("h2",null,i.createElement(M.J,{height:"64px"},i.createElement(v.az,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Size & Fit"}],id:"product_detail.accordion.button.size_fit"})),i.createElement(j.Q,null))),i.createElement(x.v,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"}))),i.createElement(C.A,null,i.createElement("h2",null,i.createElement(M.J,{height:"64px"},i.createElement(v.az,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Reviews"}],id:"product_detail.accordion.button.reviews"})),i.createElement(j.Q,null))),i.createElement(x.v,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"}))),i.createElement(C.A,null,i.createElement("h2",null,i.createElement(M.J,{height:"64px"},i.createElement(v.az,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Questions"}],id:"product_detail.accordion.button.questions"})),i.createElement(j.Q,null))),i.createElement(x.v,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"})))),i.createElement(v.az,{display:["none","none","none","block"],flex:4}))};B.propTypes={product:d().object};const V=B;var z=r(54490),N=r(2219),q=r(6834),F=r(84479),H=r(64965),W=r(34638),Q=r(54851),$=r(19039),R=r(2702);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const G=()=>{var e,t,r,n,l,d,L,C;const{formatMessage:M}=(0,c.A)(),j=(0,H.W6)(),x=(0,H.zy)(),B=(0,P.A)(),U=(0,b.A)(),K=(0,O.A)(),G=(0,W.d)(),X=(0,E.A)(),Z=(0,h.useCustomerId)(),{onOpen:ee}=(0,$.s)(),te=(null===(e=(0,A.getConfig)())||void 0===e||null===(t=e.app)||void 0===t?void 0:t.multishipEnabled)??!0,re=(null===(r=(0,A.getConfig)())||void 0===r||null===(n=r.app)||void 0===n?void 0:n.storeLocatorEnabled)??k.mP,{data:oe,isLoading:ne}=(0,f.X)(),{addItemToNewOrExistingBasket:ie}=(0,h.useShopperBasketsMutationHelper)(),le=(0,h.useShopperBasketsMutation)("updateItemsInBasket"),{res:de}=(0,_.useServerContext)();de&&de.set("Cache-Control",`s-maxage=${k.kB}, stale-while-revalidate=${k.Yw}`);const{selectedStore:ae}=(0,w.I)(),ce=(null==ae?void 0:ae.inventoryId)||null,{addInventoryIdsToPickupItems:ue,updateDefaultShipmentIfNeeded:se,hasPickupItems:pe}=(0,I.A)(oe),{getShipmentIdForItems:ve}=(0,S.n)(oe),{productId:me}=(0,H.g)(),ye=new URLSearchParams(x.search),{data:he,isLoading:fe,isError:ge,error:Ee}=(0,h.useProduct)({parameters:Y({id:ye.get("pid")||me,perPricebook:!0,expand:["availability","promotions","options","images","prices","variations","set_products","bundled_products","page_meta_tags"],allImages:!0},ce?{inventoryIds:ce}:{})},{keepPreviousData:!0}),{data:Pe,isError:be,error:Oe}=(0,h.useCategory)({parameters:{id:null==he?void 0:he.primaryCategoryId,levels:1}}),[_e,Ie]=(0,i.useState)({}),[we,Se]=(0,i.useState)({}),[ke,Ae]=(0,i.useState)(1),De=i.useRef({}),Te=null==he?void 0:he.type.set,Le=null==he?void 0:he.type.bundle,Ce=Le||Te?null===(l=Object.keys(_e))||void 0===l?void 0:l.map(e=>{var t,r;return(null===(t=_e[e].variant)||void 0===t?void 0:t.productId)||(null===(r=_e[e].product)||void 0===r?void 0:r.id)}):[],{data:Me}=(0,h.useProducts)({parameters:Y(Y({ids:Ce.join(","),allImages:!1},ce?{inventoryIds:ce}:{}),{},{expand:["availability","variations"],select:"(data.(id,inventory,inventories,master))"})},{enabled:Ce.length>0,keepPreviousData:!0}),je=((e,t,r,o,n)=>(0,i.useMemo)(()=>{if(!o&&!n)return e;const i=(0,s.hh)(e);if(!i.childProducts)return i;const l=i.childProducts;if(null!=t&&t.data&&l.forEach(({product:e},r)=>{const o=t.data.find(t=>{var r;return(null==t||null===(r=t.master)||void 0===r?void 0:r.masterId)===e.id});o&&(l[r].product=J(J({},e),{},{inventory:o.inventory,inventories:o.inventories}))}),o){let e,t,o=!1,n=!1;l.forEach(({product:i})=>{var l,d,a;i.inventory?(null===(l=e)||void 0===l?void 0:l.stockLevel)<i.inventory.stockLevel||(e=J({},i.inventory),e.lowestStockLevelProductName=i.name):o=!0;const c=null===(d=i.inventories)||void 0===d?void 0:d.find(e=>e.id===r);c?(null===(a=t)||void 0===a?void 0:a.stockLevel)<c.stockLevel||(t=J({},c),t.lowestStockLevelProductName=i.name):n=!0}),!o&&e&&(i.inventory=e),!n&&t&&(i.inventories=[t])}return i},[e,t,r]))(he,Me,ce,Te,Le);if(ge){var xe;const e=null==Ee||null===(xe=Ee.response)||void 0===xe?void 0:xe.status;if(404===e)throw new N.HTTPNotFound("Product Not Found.");throw new N.HTTPError(e,`HTTP Error ${e} occurred.`)}if(be){var Be;const e=null==Oe||null===(Be=Oe.response)||void 0===Be?void 0:Be.status;if(404===e)throw new N.HTTPNotFound("Category Not Found.");throw new N.HTTPError(e,`HTTP Error ${e} occurred.`)}const[Ve,ze]=(0,i.useState)(Pe),Ne=(0,g.rn)(je);(0,i.useEffect)(()=>{Pe&&ze(Pe)},[Pe]),(0,i.useEffect)(()=>{if(!Ne)return;const e=(0,F.tE)(`${x.pathname}${x.search}`,{pid:null==Ne?void 0:Ne.productId});j.replace(e)},[Ne]);const{data:qe,isLoading:Fe}=(0,Q.T)(),He=(0,h.useShopperCustomersMutation)("createCustomerProductListItem"),We=(e,t,r)=>{var o;(null==qe||null===(o=qe.customerProductListItems)||void 0===o?void 0:o.find(r=>r.productId===(null==t?void 0:t.productId)||r.productId===(null==e?void 0:e.id)))?G({title:M(k.p7),status:"info",action:i.createElement(p.$,{variant:"link",onClick:()=>X("/account/wishlist")},M(k.D$))}):He.mutate({parameters:{listId:qe.id,customerId:Z},body:{quantity:r,productId:(null==t?void 0:t.productId)||(null==e?void 0:e.id),public:!1,priority:1,type:"product"}},{onSuccess:()=>{G({title:M(k.FD,{quantity:1}),status:"success",action:i.createElement(p.$,{variant:"link",onClick:()=>X("/account/wishlist")},M(k.D$))})},onError:()=>{$e()}})},Qe=(0,W.d)(),$e=e=>{const t="string"==typeof e?e:M(k.gS);Qe({title:t,status:"error"})},[Re,Ue]=(0,i.useState)({}),Je=(e,t)=>{Ue(r=>Y(Y({},r),{},{[e]:t}))},Ke=function(){var e=(0,o.A)(function*(e=[]){try{var t,r,o;let n=e.map(e=>{const{variant:t,quantity:r}=e,o=t||e.product||je;return{productId:(null==o?void 0:o.productId)||(null==o?void 0:o.id),price:null==o?void 0:o.price,quantity:r}});if(n=ue(n,Re,ae),n.some(e=>void 0===e.inventoryId&&Re[e.productId||e.id]))return void $e(M({id:"product_view.error.no_store_selected_for_pickup",defaultMessage:[{type:0,value:"No valid store or inventory found for pickup"}]}));const i=pe(e,Re,je),l=(0,R.gF)(null==oe||null===(t=oe.shipments)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.shippingMethod);if(!te&&oe&&(null===(o=oe.productItems)||void 0===o?void 0:o.length)>0){if(i&&!l)throw new Error(M({id:"product_view.error.select_ship_to_address",defaultMessage:[{type:0,value:"Select 'Ship to Address' to match the delivery method for the items in your cart."}]}));if(!i&&l)throw new Error(M({id:"product_view.error.select_pickup_in_store",defaultMessage:[{type:0,value:"Select 'Pick Up in Store' to match the delivery method for the items in your cart."}]}))}const d=yield ve(i,ae);d&&(n=n.map(e=>Y(Y({},e),{},{shipmentId:d})));const a=yield ie(n);yield se(a,d,i,ae);const c=e.map(({product:e,variant:t,quantity:r})=>({product:e,productId:(null==t?void 0:t.productId)||(null==e?void 0:e.id),price:(null==t?void 0:t.price)||(null==e?void 0:e.price),quantity:r}));return B.sendAddToCart(c),e}catch(e){$e(e.message)}});return function(){return e.apply(this,arguments)}}(),Ye=(0,i.useCallback)(()=>{var e,t;Object.values(De.current).forEach(({validateOrderability:e})=>{e({scrollErrorIntoView:!1})});const r=Object.keys(_e),o=null==je||null===(e=je.childProducts)||void 0===e||null===(t=e.find(({product:e})=>{var t;return!(null!==(t=e.type)&&void 0!==t&&t.item||r.includes(e.id))}))||void 0===t?void 0:t.product;if(o){const{ref:e}=De.current[o.id];return e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"end"}),!1}return!0},[je,_e]),Ge=function(){var e=(0,o.A)(function*([{quantity:e}]){try{var t;const n=Object.values(_e),i=[{product:je,variant:null,selectedQuantity:e},...n],l=pe(i,Re,je);if(!te&&oe&&(null===(t=oe.productItems)||void 0===t?void 0:t.length)>0){var r,o;const e=null==oe||null===(r=oe.shipments)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.shippingMethod,t=(0,R.gF)(e);if(!(!l||e&&t))throw new Error(M({id:"product_view.error.select_ship_to_address",defaultMessage:[{type:0,value:"Select 'Ship to Address' to match the delivery method for the items in your cart."}]}));if(!l&&e&&t)throw new Error(M({id:"product_view.error.select_pickup_in_store",defaultMessage:[{type:0,value:"Select 'Pick Up in Store' to match the delivery method for the items in your cart."}]}))}let d=[{productId:je.id,price:je.price,quantity:e,bundledProductItems:n.map(e=>{var t,r;return{productId:(null===(t=e.variant)||void 0===t?void 0:t.productId)||(null===(r=e.product)||void 0===r?void 0:r.id),quantity:e.quantity}})}];d=ue(d,Re,ae);const a=yield ve(l,ae);a&&(d=d.map(e=>Y(Y({},e),{},{shipmentId:a})));const c=yield ie(d),u=n.map(e=>e.product.id),p=c.productItems.find(e=>{var t,r;if(null!==(t=e.bundledProductItems)&&void 0!==t&&t.length)return(null===(r=e.bundledProductItems)||void 0===r?void 0:r.map(e=>e.productId)).every(e=>u.includes(e))}),v=(0,s.NM)(p,n);return v.length&&(yield le.mutateAsync({method:"PATCH",parameters:{basketId:c.basketId},body:v})),yield se(c,a,l,ae),B.sendAddToCart(d),n}catch(e){$e(e)}});return function(t){return e.apply(this,arguments)}}();return(0,i.useEffect)(()=>{if(je&&je.type.set)B.sendViewProduct(je),U.sendViewProduct(je),je.setProducts.map(e=>{try{B.sendViewProduct(e)}catch(t){q.A.error("Einstein sendViewProduct error",{namespace:"ProductDetail.useEffect",additionalProperties:{error:t,child:e}})}K.sendViewProduct(Pe,e,"detail"),U.sendViewProduct(e)});else if(je){try{B.sendViewProduct(je)}catch(e){q.A.error("Einstein sendViewProduct error",{namespace:"ProductDetail.useEffect",additionalProperties:{error:e,product:je}})}K.sendViewProduct(Pe,je,"detail"),U.sendViewProduct(je)}},[je]),i.createElement(v.az,{className:"sf-product-detail-page",layerStyle:"page","data-testid":"product-details-page"},i.createElement(m.D,{as:"h1",srOnly:!0},i.createElement(u.A,{defaultMessage:[{type:0,value:"Product Details"}],id:"product_detail.title.product_details"})),i.createElement(a.Helmet,null,i.createElement("title",null,null==je?void 0:je.pageTitle),(null==je||null===(d=je.pageMetaTags)||void 0===d?void 0:d.length)>0&&je.pageMetaTags.map(({id:e,value:t})=>i.createElement("meta",{name:e,content:t,key:e})),!(null!=je&&null!==(L=je.pageMetaTags)&&void 0!==L&&L.some(e=>"description"===e.id))&&(null==je?void 0:je.pageDescription)&&i.createElement("meta",{name:"description",content:je.pageDescription})),i.createElement(y.B,{spacing:16},Te||Le?i.createElement(i.Fragment,null,i.createElement(z.A,{hydrateOn:"visible"},i.createElement(T.A,{product:je,category:(null==Ve?void 0:Ve.parentCategoryTree)||[],addToCart:Te?()=>{const e=Object.values(_e);return Ke(e)}:Ge,addToWishlist:We,isProductLoading:fe,isBasketLoading:ne,isWishlistLoading:Fe,validateOrderability:Ye,childProductOrderability:we,setSelectedBundleQuantity:Ae,selectedBundleParentQuantity:ke,pickupInStore:!!Re[null==je?void 0:je.id],setPickupInStore:e=>je&&Je(je.id,e),onOpenStoreLocator:ee,showDeliveryOptions:re})),i.createElement("hr",null),null==je||null===(C=je.childProducts)||void 0===C?void 0:C.map(({product:e,quantity:t})=>{var r,o;return i.createElement(v.az,{key:e.id,"data-testid":"child-product"},i.createElement(T.A,{ref:function(t){De.current[e.id]={ref:t,validateOrderability:this.validateOrderability}},product:e,isProductPartOfSet:Te,isProductPartOfBundle:Le,childOfBundleQuantity:t,selectedBundleParentQuantity:ke,addToCart:Te?e=>Ke(e):null,addToWishlist:Te?We:null,onVariantSelected:(e,r,o)=>{if(o)Ie(n=>Y(Y({},n),{},{[e.id]:{product:e,variant:r,quantity:Le?t:o}}));else{const t=Y({},_e);delete t[e.id],Ie(t)}},isProductLoading:fe,isBasketLoading:ne,isWishlistLoading:Fe,setChildProductOrderability:Se,pickupInStore:!!Re[null===(r=_e[null==e?void 0:e.id])||void 0===r||null===(o=r.variant)||void 0===o?void 0:o.productId],setPickupInStore:t=>{var r,o;return e&&Je(null===(r=_e[null==e?void 0:e.id])||void 0===r||null===(o=r.variant)||void 0===o?void 0:o.productId,t)},onOpenStoreLocator:ee,showDeliveryOptions:re&&!Le}),i.createElement(V,{product:e}),i.createElement(v.az,{display:["none","none","none","block"]},i.createElement("hr",null)))})):i.createElement(i.Fragment,null,i.createElement(z.A,{hydrateOn:"visible"},i.createElement(T.A,{product:je,category:(null==Ve?void 0:Ve.parentCategoryTree)||[],addToCart:Ke,addToWishlist:We,isProductLoading:fe,isBasketLoading:ne,isWishlistLoading:Fe,childProductOrderability:we,setChildProductOrderability:Se,setSelectedBundleQuantity:Ae,selectedBundleParentQuantity:ke,pickupInStore:!!Re[null==je?void 0:je.id],setPickupInStore:e=>je&&Je(je.id,e),onOpenStoreLocator:ee,showDeliveryOptions:re}),i.createElement(V,{product:je}))),i.createElement(y.B,{spacing:16},!Te&&i.createElement(z.A,{hydrateOn:"visible"},i.createElement(D.A,{title:i.createElement(u.A,{defaultMessage:[{type:0,value:"Complete the Set"}],id:"product_detail.recommended_products.title.complete_set"}),recommender:k.tD.PDP_COMPLETE_SET,products:[je],mx:{base:-4,md:-8,lg:0},shouldFetch:()=>null==je?void 0:je.id})),i.createElement(z.A,{hydrateOn:"visible"},i.createElement(D.A,{title:i.createElement(u.A,{defaultMessage:[{type:0,value:"You might also like"}],id:"product_detail.recommended_products.title.might_also_like"}),recommender:k.tD.PDP_MIGHT_ALSO_LIKE,products:[je],mx:{base:-4,md:-8,lg:0},shouldFetch:()=>null==je?void 0:je.id})),i.createElement(z.A,{hydrateOn:"visible"},i.createElement(D.A,{key:x.key,title:i.createElement(u.A,{defaultMessage:[{type:0,value:"Recently Viewed"}],id:"product_detail.recommended_products.title.recently_viewed"}),recommender:k.tD.PDP_RECENTLY_VIEWED,mx:{base:-4,md:-8,lg:0}})))))};G.getTemplateName=()=>"product-detail",G.propTypes={match:d().object};const X=G}}]);