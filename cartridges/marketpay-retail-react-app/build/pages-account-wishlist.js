"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[505],{26647(e,t,n){n.d(t,{A:()=>L});var r=n(64180),o=n(18801),l=n(77810),a=n(17015),i=n(63177),c=n(95266),s=n(92769),u=n(49632),A=n(27821),d=n(41539),p=n(28287),b=n(75826),m=n.n(b),y=n(10575),f=n(34692);const O=["dialogTitle","confirmationMessage","primaryActionLabel","primaryActionAriaLabel","alternateActionLabel","alternateActionAriaLabel","hideAlternateAction","onPrimaryAction","onAlternateAction"],v=e=>{let{dialogTitle:t=y.Gz.dialogTitle,confirmationMessage:n=y.Gz.confirmationMessage,primaryActionLabel:b=y.Gz.primaryActionLabel,primaryActionAriaLabel:m=y.Gz.primaryActionAriaLabel,alternateActionLabel:v=y.Gz.alternateActionLabel,alternateActionAriaLabel:L=y.Gz.alternateActionAriaLabel,hideAlternateAction:g=!1,onPrimaryAction:j=a.lQ,onAlternateAction:E=a.lQ}=e,h=(0,o.A)(e,O);const{formatMessage:P}=(0,f.A)(),_=()=>{E(),h.onClose()};return l.createElement(i.L,(0,r.A)({isOpen:h.isOpen,isCentered:!0,onClose:_},h),l.createElement(d.m,null),l.createElement(i.E,null,l.createElement(u.r,null,P(t)),l.createElement(p.c,null,l.createElement(A.E,null,P(n))),l.createElement(s.j,null,g?null:l.createElement(c.$,{variant:"ghost",mr:3,"aria-label":P(L),onClick:_},P(v)),l.createElement(c.$,{variant:"solid",onClick:()=>{j(),h.onClose()},"aria-label":P(m)},P(b)))))};v.propTypes={isOpen:m().bool.isRequired,onOpen:m().func.isRequired,onClose:m().func.isRequired,dialogTitle:m().object,confirmationMessage:m().object,primaryActionLabel:m().object,primaryActionAriaLabel:m().object,alternateActionLabel:m().object,alternateActionAriaLabel:m().object,onPrimaryAction:m().func,onAlternateAction:m().func,hideAlternateAction:m().bool};const L=v},71878(e,t,n){n.d(t,{A:()=>f});var r=n(64180),o=n(28407),l=n(10939),a=n(77810),i=n(75826),c=n.n(i),s=n(90031),u=n(73448),A=n(26647),d=n(75002),p=n(17015);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,l.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const y=({productIds:e=[],productItems:t=[],handleUnavailableProducts:n=p.lQ})=>{const l=(0,a.useRef)(null),i=e.length?e:t.map(e=>e.productId),c=[...new Set(t.map(e=>e.inventoryId).filter(Boolean))].join(",");(0,s.useProducts)({parameters:m({ids:null==i?void 0:i.join(","),allImages:!0},c?{inventoryIds:c}:{})},{enabled:(null==i?void 0:i.length)>0,onSuccess:e=>{var n;const r=[],o=[];null===(n=e.data)||void 0===n||n.forEach(({id:e,inventory:n,inventories:l})=>{if(r.push(e),t.length){const r=t.find(t=>t.productId===e),a=!(null==r||!r.type),i=(null==l?void 0:l.find(e=>e.id===r.inventoryId))||n;a||null!=i&&i.orderable&&!(null!=i&&i.orderable&&(null==r?void 0:r.quantity)>i.stockLevel)||o.push(e)}});const a=i.filter(e=>!r.includes(e)||o.includes(e));l.current=a}});const b=(0,d.j)();return(0,a.useEffect)(()=>{var e;(null===(e=l.current)||void 0===e?void 0:e.length)>0&&b.onOpen()},[l.current]),a.createElement(A.A,(0,r.A)({"data-testid":"unavailable-product-modal",closeOnEsc:!1,closeOnOverlayClick:!1},u.F1,{hideAlternateAction:!0,onPrimaryAction:(0,o.A)(function*(){yield n(l.current),l.current=null,b.onClose()}),onAlternateAction:()=>{}},b))};y.propTypes={productItems:c().array,productIds:c().array,handleUnavailableProducts:c().func};const f=y}}]);